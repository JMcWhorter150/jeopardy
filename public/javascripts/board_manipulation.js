const object = [
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'NOT A CURRENT NATIONAL CAPITAL',
      Value: '$400',
      Question: 'Ljubljana, Bratislava, Barcelona',
      Answer: 'Barcelona'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'U.S. WINTER OLYMPIANS',
      Value: '$400',
      Question: 'Mike Eruzione of Winthrop, Mass. was captain of the miraculous 1980 Olympic team in this sport',
      Answer: 'hockey'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'SCIENCE',
      Value: '$400',
      Question: 'At sea level at 70 degrees this travels 1,129 feet per second; it speeds up over 1 foot per sec. for each rising degree',
      Answer: 'sound'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'WORDS OF THE WRITER',
      Value: '$400',
      Question: 'I beheld the wretch--the miserable monster whom I had created',
      Answer: 'Mary Shelley'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'AT THE MALL',
      Value: '$400',
      Question: 'Found "just what I needed" at this "City", an electronics store',
      Answer: 'Circuit City'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'FROM THE GREEK',
      Value: '$400',
      Question: 'The name of this color comes from the Greek word porphyra',
      Answer: 'purple'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'NOT A CURRENT NATIONAL CAPITAL',
      Value: '$800',
      Question: 'Istanbul, Ottawa, Amman',
      Answer: 'Istanbul'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'U.S. WINTER OLYMPIANS',
      Value: '$800',
      Question: '(<a href="http://www.j-archive.com/media/2006-02-06_DJ_23.jpg" target="_blank">Jimmy of the Clue Crew puts some lines on the ice in the Olympic Oval rink at Park City, UT.</a>)  In 1998, <a href="http://www.j-archive.com/media/2006-02-06_DJ_23a.jpg" target="_blank">this U.S. skater</a> was 2nd at Nagano; in 2002, she was 3rd here in Utah',
      Answer: 'Michelle Kwan'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'SCIENCE',
      Value: '$800',
      Question: 'The largest tree, the General Sherman in California, is this type, also called a Sierra Redwood',
      Answer: 'a sequoia'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'WORDS OF THE WRITER',
      Value: '$800',
      Question: 'Take thy beak from out my heart, and take thy form from off my door!',
      Answer: 'Edgar Allan Poe'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'AT THE MALL',
      Value: '$800',
      Question: 'SKX is the stock symbol for this manufacturer of sporty shoes',
      Answer: 'Skechers'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'FROM THE GREEK',
      Value: '$1,000',
      Question: `A bowl-shaped depression, as from the impact of a meteorite, it's from the Greek for "mixing bowl`,
      Answer: 'crater'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'NOT A CURRENT NATIONAL CAPITAL',
      Value: '$1200',
      Question: 'Sofia, Sarajevo, Saigon',
      Answer: 'Saigon'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'U.S. WINTER OLYMPIANS',
      Value: '$1200',
      Question: 'Life has its ups & downs for Travis Mayer, a 2002 medalist in the event named for these little hills on the slopes',
      Answer: 'moguls'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'SCIENCE',
      Value: '$1200',
      Question: `(<a href="http://www.j-archive.com/media/2006-02-06_DJ_13.jpg" target="_blank">Sarah of the Clue Crew reads from the pole vault at Duke University's track in Durham, NC.</a>)  In bending an elastic solid, stress is the force causing deformation & this is the 6-letter term for <a href="http://www.j-archive.com/media/2006-02-06_DJ_13a.jpg" target="_blank">the deformation</a>`,
      Answer: 'strain'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'WORDS OF THE WRITER',
      Value: '$1,500',
      Question: "'Do all lawyers defend n-negroes, Atticus?'  'Of course they do, Scout'",
      Answer: 'Harper Lee'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'AT THE MALL',
      Value: '$1200',
      Question: 'This "Urban" store is the parent company of Anthropologie',
      Answer: 'Urban Outfitters'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'FROM THE GREEK',
      Value: '$1200',
      Question: `From the Greek for "false name", it's a fictitious name used by an author`,
      Answer: 'a pseudonym'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'NOT A CURRENT NATIONAL CAPITAL',
      Value: '$1600',
      Question: 'Bucharest, Bonn, Bern',
      Answer: 'Bonn'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'U.S. WINTER OLYMPIANS',
      Value: '$1600',
      Question: 'In 2002 Vonetta Flowers & Jill Bakken won gold in the 2-woman version of this high-speed sport',
      Answer: 'the bobsled'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'SCIENCE',
      Value: '$1600',
      Question: '6 elements once known as inert gases are now known by this aristocratic name',
      Answer: 'noble gases'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'WORDS OF THE WRITER',
      Value: '$1600',
      Question: 'For never man had a more faithful, loving, sincere servant, than Friday was to me',
      Answer: 'Daniel Defoe'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'AT THE MALL',
      Value: '$1600',
      Question: 'This bookstore chain is named for its "edgy" founders, brothers Tom & Louis',
      Answer: 'Borders'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'FROM THE GREEK',
      Value: '$1600',
      Question: '(<a href="http://www.j-archive.com/media/2006-02-06_DJ_04.jpg" target="_blank">Jon of the Clue Crew paddles his kayak.</a>)  Kayak is an example of this type of reversible word from the Greek for "running back again',
      Answer: 'a palindrome'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'NOT A CURRENT NATIONAL CAPITAL',
      Value: '$2000',
      Question: 'Belize City, Guatemala City, Panama City',
      Answer: 'Belize City'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'U.S. WINTER OLYMPIANS',
      Value: '$2000',
      Question: 'His "Bode" of work includes 2 Alpine skiing silver medals in 2002',
      Answer: 'Bode Miller'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'SCIENCE',
      Value: '$2000',
      Question: `(<a href="http://www.j-archive.com/media/2006-02-06_DJ_15.wmv">A honey-colored retriever named Max tries to lick Cheryl of the Clue Crew as she pets him at NC State University in Raleigh, NC.</a>)  Veterinarians refer to this area of an animal's body as the posterior or this region, from the Latin for "the tail`,
      Answer: 'the caudal region'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'WORDS OF THE WRITER',
      Value: '$2000',
      Question: "'...Why look'st thou so?'--'With my crossbow I shot the albatross'",
      Answer: 'Samuel Taylor Coleridge'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'AT THE MALL',
      Value: '$2000',
      Question: 'The name of this clothing store for teens is French for "airmail',
      Answer: 'AÃ©ropostale'
    },
    {
      'Show Number': 4931,
      'Air Date': '2006-02-06',
      Round: 'Double Jeopardy!',
      Category: 'FROM THE GREEK',
      Value: '$2000',
      Question: "It's an outline of the contents of a course or curriculum",
      Answer: 'a syllabus'
    }
  ];

// TODO: Get object to actually pull from backend to create object
// TODO: Make functionality to change jeopardy board and reset to double jeopardy
// TODO: Make final jeopardy functionality

// TODO: Figure out how to manipulate string text when image or <a> should be shown
// TODO: Make it playable by multiple people
// TODO: Export Data after game ends
// TODO: Add daily double functionality (happens when values are not exactly 4, 8, 12, 16, 20 etc.)
// TODO: Make alex page??????

function updateScoreDOM(score) {
    let userScore = document.querySelector('.score');
    let currentScore = parseInt((userScore.textContent).slice(8));
    userScore.textContent = `Score: $${currentScore + score}`;
}

function removeQuestionDOM(event) {
    event.target.textContent = "";
    event.target.removeEventListener("click", removeQuestionDOM);
    event.target.dataAttribute = null;
}
    
function updateBoardDOM() {
    // after all questions are removed, repopulates board with next set of questions and categories
}

function populateBoardDOM(obj) {
    // takes show object, updates text content of each block, adds onclick to each block
    // five questions, six categories
    resetQuestionsDOM(2); // change 1 to whatever round it is
    populateCategoriesDOM(obj);
    populateQuestionsDOM(obj);
    addAnswerCheck();
}

function resetQuestionsDOM(factor) {
    for (let i=1;i<7;i++) {
        let questionArr = document.querySelectorAll(`.question${i}`);
        questionArr.forEach(element => {
            element.textContent = `$${i * factor * 200}`;
            element.addEventListener('click', populateQuestionDOM);
            element.addEventListener('click', removeQuestionDOM);
            element.addEventListener('click', answerTimer);
        });
    }
}

function populateCategoriesDOM(obj) {
    // grabs first six categories from object and makes category names
    const categoryDOMArray = document.querySelectorAll('.category-item');
    for (let i=0;i<6;i++) {
        categoryDOMArray[i].textContent = obj[i].Category;
    }
}

function populateQuestionsDOM(obj) {
    // grabs each category of questions, and adds data to each element of category
    const questionsDOMArray = document.querySelectorAll('.question-item');
    for (let i=0;i<obj.length;i++) {
        questionsDOMArray[i].dataAttribute = {
            "Question": obj[i].Question,
            "Answer": obj[i].Answer,
            "Value": obj[i].Value
        };
    }
}
 
function populateQuestionDOM(event) {
    // when question is clicked, updates result box with question, updates resultbox question value, removes question
    let questionContainer = document.querySelector('.questionContainer');
    let question = document.querySelector('#questionText');
    let answer = document.querySelector('#answerField');
    answer.dataAttribute = {
        "Answer": event.target.dataAttribute.Answer,
        "Value": event.target.dataAttribute.Value
    };
    question.textContent = event.target.dataAttribute.Question;
    // changes display from none to flex to show question
    questionContainer.style.display = "flex";
    // puts cursor in answerField
    answer.focus();
    answer.select();
}

function resetQuestionContainer() {
    // empties the answer box
    let questionContainer = document.querySelector('.questionContainer');
    let question = document.querySelector('#questionText');
    let answer = document.querySelector('#answerField');
    answer.dataAttribute = null;
    question.textContent = "";
    questionContainer.style.display = "none";
}

function addAnswerCheck() {
    let answer = document.querySelector('#answerField');
    // change triggers when value for input field changed and focus lost or submitted
    answer.addEventListener('change', checkIfRight);
}

function buzzTimer() {
    // When question selected, starts callback, exits when button clicked to allow typing
    // ?????????
    // let myVar = setTimeout(callback, milliseconds);
    // clearTimeout(myVar);
}

function answerTimer() {
    // once buzzed in, times how long they have to type the answer of the question
    // when someone clicks a category, it waits and then auto exits if no answer
    let timeleft = 9; // should match whatever the progress bar max is in html
    let progressBar = document.querySelector('#progressBar');
    let questionTimer = setInterval(function(){
        progressBar.value = 10 - timeleft; // first number should be timeleft +1
        timeleft -= 1;
        if(timeleft <= 0){
            clearInterval(questionTimer);
            progressBar.value = 0;
            missedQuestion();
        }
    }, 1000);
}

function missedQuestion() {
    let answerValue = document.querySelector('#answerField').dataAttribute.Value;
    answerValue = parseInt(answerValue.slice(1));
    updateScoreDOM(answerValue * -1);
    resetQuestionContainer();
}

function checkIfRight(event) {
    // checks whether user input is correct
    let userAnswer = event.target.value;
    let correctAnswer = formatText(event.target.dataAttribute.Answer);
    let answerValue = event.target.dataAttribute.Value;
    answerValue = parseInt(answerValue.slice(1));
    if (userAnswer === correctAnswer) {
        console.log('right');
        updateScoreDOM(answerValue);
    } else {
        console.log('wrong');
        updateScoreDOM(answerValue * -1);
    }
    resetQuestionContainer();
}

function formatText(str) {
    // changes users answer and question answer
    return str.toLowerCase();
}

function ifNoAnswers() {
    // update answer box to Next Question, resets answer box
}

function sendDataToBackend() {
    // after game is done, sends game data back to backend
}




populateBoardDOM(object);